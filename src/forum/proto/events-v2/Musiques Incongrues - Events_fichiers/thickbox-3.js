if(!window.Vanilla){var Vanilla=new PathFinder();Vanilla.webRoot=Vanilla.getRootPath("script","src","js/global.js")||Vanilla.getRootPath("script","src",/js\/packer\.php.*$/);Vanilla.styleUrl=Vanilla.getRootPath("link","href","vanilla.css")||Vanilla.getRootPath("link","href",/packer\.php.*$/);Vanilla.baseURL=Vanilla.params.httpMethod+Vanilla.params.domain+Vanilla.webRoot}jQuery(document).ready(function(B){var J=Vanilla.webRoot+"extensions/JQThickBox/loadingAnimation-3.1.gif";B(document).ready(function(){H("a.thickbox, area.thickbox, input.thickbox");imgLoader=new Image();imgLoader.src=J});function H(K){B(K).click(function(){var M=this.title||this.name||null;var L=this.href||this.alt;var N=this.rel||false;F(M,L,N);this.blur();return false})}function F(S,L,Q){try{if(typeof document.body.style.maxHeight==="undefined"){B("body","html").css({height:"100%",width:"100%"});B("html").css("overflow","hidden");if(document.getElementById("TB_HideSelect")===null){B("body").append("<iframe id='TB_HideSelect'></iframe><div id='TB_overlay'></div><div id='TB_window'></div>");B("#TB_overlay").click(D)}}else{if(document.getElementById("TB_overlay")===null){B("body").append("<div id='TB_overlay'></div><div id='TB_window'></div>");B("#TB_overlay").click(D)}}if(I()){B("#TB_overlay").addClass("TB_overlayMacFFBGHack")}else{B("#TB_overlay").addClass("TB_overlayBG")}if(S===null){S=""}B("body").append("<div id='TB_load'><img src='"+imgLoader.src+"' /></div>");B("#TB_load").show();var M;if(L.indexOf("?")!==-1){M=L.substr(0,L.indexOf("?"))}else{M=L}var O=/\.jpg|\.jpeg|\.png|\.gif|\.bmp/g;var T=M.toLowerCase().match(O);if(T==".jpg"||T==".jpeg"||T==".png"||T==".gif"||T==".bmp"){TB_PrevCaption="";TB_PrevURL="";TB_PrevHTML="";TB_NextCaption="";TB_NextURL="";TB_NextHTML="";TB_imageCount="";TB_FoundURL=false;if(Q){TB_TempArray=B("a[@rel="+Q+"]").get();for(TB_Counter=0;((TB_Counter<TB_TempArray.length)&&(TB_NextHTML===""));TB_Counter++){var P=TB_TempArray[TB_Counter].href.toLowerCase().match(O);if(!(TB_TempArray[TB_Counter].href==L)){if(TB_FoundURL){TB_NextCaption=TB_TempArray[TB_Counter].title;TB_NextURL=TB_TempArray[TB_Counter].href;TB_NextHTML="<span id='TB_next'>&nbsp;&nbsp;<a href='#'>Next &gt;</a></span>"}else{TB_PrevCaption=TB_TempArray[TB_Counter].title;TB_PrevURL=TB_TempArray[TB_Counter].href;TB_PrevHTML="<span id='TB_prev'>&nbsp;&nbsp;<a href='#'>&lt; Prev</a></span>"}}else{TB_FoundURL=true;TB_imageCount="Image "+(TB_Counter+1)+" of "+(TB_TempArray.length)}}}imgPreloader=new Image();imgPreloader.onload=function(){imgPreloader.onload=null;var X=A();var V=X[0]-150;var a=X[1]-150;var W=imgPreloader.width;var U=imgPreloader.height;if(W>V){U=U*(V/W);W=V;if(U>a){W=W*(a/U);U=a}}else{if(U>a){W=W*(a/U);U=a;if(W>V){U=U*(V/W);W=V}}}TB_WIDTH=W+30;TB_HEIGHT=U+60;B("#TB_window").append("<a href='' id='TB_ImageOff' title='Close'><img id='TB_Image' src='"+L+"' width='"+W+"' height='"+U+"' alt='"+S+"'/></a><div id='TB_caption'>"+S+"<div id='TB_secondLine'>"+TB_imageCount+TB_PrevHTML+TB_NextHTML+"</div></div><div id='TB_closeWindow'><a href='#' id='TB_closeWindowButton' title='Close'>close</a> or Esc Key</div>");B("#TB_closeWindowButton").click(D);if(!(TB_PrevHTML==="")){function Z(){if(B(document).unbind("click",Z)){B(document).unbind("click",Z)}B("#TB_window").remove();B("body").append("<div id='TB_window'></div>");F(TB_PrevCaption,TB_PrevURL,Q);return false}B("#TB_prev").click(Z)}if(!(TB_NextHTML==="")){function Y(){B("#TB_window").remove();B("body").append("<div id='TB_window'></div>");F(TB_NextCaption,TB_NextURL,Q);return false}B("#TB_next").click(Y)}document.onkeydown=function(b){if(b==null){keycode=event.keyCode}else{keycode=b.which}if(keycode==27){D()}else{if(keycode==190){if(!(TB_NextHTML=="")){document.onkeydown="";Y()}}else{if(keycode==188){if(!(TB_PrevHTML=="")){document.onkeydown="";Z()}}}}};C();B("#TB_load").remove();B("#TB_ImageOff").click(D);B("#TB_window").css({display:"block"})};imgPreloader.src=L}else{var K=L.replace(/^[^\?]+\??/,"");var N=G(K);TB_WIDTH=(N.width*1)+30||630;TB_HEIGHT=(N.height*1)+40||440;ajaxContentW=TB_WIDTH-30;ajaxContentH=TB_HEIGHT-45;if(L.indexOf("TB_iframe")!=-1){urlNoQuery=L.split("TB_");B("#TB_iframeContent").remove();if(N.modal!="true"){B("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+S+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton' title='Close'>close</a> or Esc Key</div></div><iframe frameborder='0' hspace='0' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1000)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;height:"+(ajaxContentH+17)+"px;' > </iframe>")}else{B("#TB_overlay").unbind();B("#TB_window").append("<iframe frameborder='0' hspace='0' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1000)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;height:"+(ajaxContentH+17)+"px;'> </iframe>")}}else{if(B("#TB_window").css("display")!="block"){if(N.modal!="true"){B("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+S+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton'>close</a> or Esc Key</div></div><div id='TB_ajaxContent' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px'></div>")}else{B("#TB_overlay").unbind();B("#TB_window").append("<div id='TB_ajaxContent' class='TB_modal' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px;'></div>")}}else{B("#TB_ajaxContent")[0].style.width=ajaxContentW+"px";B("#TB_ajaxContent")[0].style.height=ajaxContentH+"px";B("#TB_ajaxContent")[0].scrollTop=0;B("#TB_ajaxWindowTitle").html(S)}}B("#TB_closeWindowButton").click(D);if(L.indexOf("TB_inline")!=-1){B("#TB_ajaxContent").append(B("#"+N.inlineId).children());B("#TB_window").unload(function(){B("#"+N.inlineId).append(B("#TB_ajaxContent").children())});C();B("#TB_load").remove();B("#TB_window").css({display:"block"})}else{if(L.indexOf("TB_iframe")!=-1){C();if(B.browser.safari){B("#TB_load").remove();B("#TB_window").css({display:"block"})}}else{B("#TB_ajaxContent").load(L+="&random="+(new Date().getTime()),function(){C();B("#TB_load").remove();H("#TB_ajaxContent a.thickbox");B("#TB_window").css({display:"block"})})}}}if(!N.modal){document.onkeyup=function(U){if(U==null){keycode=event.keyCode}else{keycode=U.which}if(keycode==27){D()}}}}catch(R){}}function E(){B("#TB_load").remove();B("#TB_window").css({display:"block"})}function D(){B("#TB_imageOff").unbind("click");B("#TB_closeWindowButton").unbind("click");B("#TB_window").fadeOut("fast",function(){B("#TB_window,#TB_overlay,#TB_HideSelect").trigger("unload").unbind().remove()});B("#TB_load").remove();if(typeof document.body.style.maxHeight=="undefined"){B("body","html").css({height:"auto",width:"auto"});B("html").css("overflow","")}document.onkeydown="";document.onkeyup="";return false}function C(){B("#TB_window").css({marginLeft:"-"+parseInt((TB_WIDTH/2),10)+"px",width:TB_WIDTH+"px"});if(!(jQuery.browser.msie&&jQuery.browser.version<7)){B("#TB_window").css({marginTop:"-"+parseInt((TB_HEIGHT/2),10)+"px"})}}function G(N){var O={};if(!N){return O}var K=N.split(/[;&]/);for(var M=0;M<K.length;M++){var Q=K[M].split("=");if(!Q||Q.length!=2){continue}var L=unescape(Q[0]);var P=unescape(Q[1]);P=P.replace(/\+/g," ");O[L]=P}return O}function A(){var M=document.documentElement;var K=window.innerWidth||self.innerWidth||(M&&M.clientWidth)||document.body.clientWidth;var L=window.innerHeight||self.innerHeight||(M&&M.clientHeight)||document.body.clientHeight;arrayPageSize=[K,L];return arrayPageSize}function I(){var K=navigator.userAgent.toLowerCase();if(K.indexOf("mac")!=-1&&K.indexOf("firefox")!=-1){return true}}});